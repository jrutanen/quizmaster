<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="report.css">
    <script src="jquery-1.11.3.min.js"></script>
    <script src="d3.min.js"></script>
    <script type="text/javascript">
        var results;
        var pollinterval;
        var pollcount = 0;

        function drawPage(){
            $.get( "getresults.php", function( data ) {
//                alert( "Running page: " + data );
                results = JSON.parse( data );
//                gametime = setInterval(updateData, 1000);
//                drawChart(results);
//                alert("Results fetched.");
                var scores = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                for (i=0;i<results.length;i++) {
                    if(results[i].player == "Bacchus") {
                        scores[0] = scores[0] + Number(results[i].score);
                    }
                    if(results[i].player == "Belenus") {
                        scores[1] = scores[1] + Number(results[i].score);
                    }
                    if(results[i].player == "Doris") {
                        scores[2] = scores[2] + Number(results[i].score);
                    }
                    if(results[i].player == "Electra") {
                        scores[3] = scores[3] + Number(results[i].score);
                    }
                    if(results[i].player == "Hattifnattarna") {
                        scores[4] = scores[4] + Number(results[i].score);
                    }
                    if(results[i].player == "Midas") {
                        scores[5] = scores[5] + Number(results[i].score);
                    }
                    if(results[i].player == "Nemesis") {
                        scores[6] = scores[6] + Number(results[i].score);
                    }
                    if(results[i].player == "Discordia&Helios&Hydra") {
                        scores[7] = scores[7] + Number(results[i].score);
                    }
                    if(results[i].player == "Sisyphus") {
                        scores[8] = scores[8] + Number(results[i].score);
                    }
                    if(results[i].player == "Vulcan") {
                        scores[9] = scores[9] + Number(results[i].score);
                    }
                }
                $('#one').css('width', scores[0] + "px");
                $('#one').text(scores[0]);
                $('#two').css('width', scores[1] + "px");
                $('#two').text(scores[1]);
                $('#three').css('width', scores[2] + "px");
                $('#three').text(scores[2]);
                $('#four').css('width', scores[3] + "px");
                $('#fout').text(scores[3]);
                $('#five').css('width', scores[4] + "px");
                $('#five').text(scores[4]);
                $('#six').css('width', scores[5] + "px");
                $('#six').text(scores[5]);
                $('#seven').css('width', scores[6] + "px");
                $('#seven').text(scores[6]);
                $('#eight').css('width', scores[7] + "px");
                $('#eight').text(scores[7]);
                $('#nine').css('width', scores[8] + "px");
                $('#nine').text(scores[8]);
                $('#ten').css('width', scores[9] + "px");
                $('#ten').text(scores[9]);
            });
        }

        window.onload = drawPage;
    </script>
    <title>Leaderboard</title>
</head>
<body>
<div class=chart>
    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
    <div id="four"></div>
    <div id="five"></div>
    <div id="six"></div>
    <div id="seven"></div>
    <div id="eight"></div>
    <div id="nine"></div>
    <div id="ten"></div>
</div>
</body>
</html>
